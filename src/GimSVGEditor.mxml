<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
					   xmlns:s="library://ns.adobe.com/flex/spark"
					   xmlns:mx="library://ns.adobe.com/flex/mx"
					   width="1200" height="800" creationComplete="onCreated(event)"
					   fontFamily="Microsoft Yahei" showStatusBar="false">
	<fx:Script>
		<![CDATA[
			import com.SVGParser;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			
			[Bindable] private var polygonsOfFloor:ArrayCollection;
			[Bindable] private var floors:ArrayCollection;
			
			protected function onCreated(event:FlexEvent):void
			{
				var size:Number = 60;
				for(var i:int = 0;i < 96;i ++)
				{
					canvas.graphics.beginFill(Math.random() * 0xFFFFFF,Math.random());
					canvas.graphics.drawCircle(canvas.parent.width * Math.random(),canvas.parent.height * Math.random(),size * Math.random());
					canvas.graphics.endFill();
				}
			}
			
			protected function onLoadBtnClick(event:MouseEvent):void
			{
				var file:File = new File();
				file.browseForOpen("打开SVG文件");
				file.addEventListener(Event.SELECT,function(e:Event):void{
					var fs:FileStream = new FileStream();
					fs.open(file,FileMode.UPDATE);
					var SVGString:String = fs.readUTFBytes(fs.bytesAvailable);
					var allPathXMLString:String = SVGParser.coverToAllPath(SVGString);
					fs.writeUTF("\n\n<!-- all path node -->\n");
					fs.writeUTF(allPathXMLString);
					fs.close();
					Alert.show("结点转换成功!");
					floors = new ArrayCollection(["floor_1","floor_2","floor_3"]);
				});
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:HGroup width="100%" height="100%" gap="0">
		<s:BorderContainer height="100%">
			<s:VGroup width="200" height="100%" gap="0">
				<s:Label text="载入与选择"/>
				<s:Button width="100%" label="载入SVG" click="onLoadBtnClick(event)"/>
				<s:DropDownList width="100%" dataProvider="{floors}"/>
				<s:List width="100%" height="100%" dataProvider="{polygonsOfFloor}"/>
			</s:VGroup>
		</s:BorderContainer>
		<s:BorderContainer height="100%">
			<s:VGroup width="700" chromeColor="0xFF0033">
				<s:Label text="字段设置"/>
				<s:HGroup width="100%">
					<s:Label width="60" text="字段名称"/>
					<s:TextInput width="100%" text="值"/>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="60" text="字段名称"/>
					<s:TextInput width="100%" text="值"/>
				</s:HGroup>
				<s:HGroup width="100%">
					<s:Label width="60" text="字段名称"/>
					<s:TextInput width="100%" text="值"/>
				</s:HGroup>
			</s:VGroup>
		</s:BorderContainer>
		<s:BorderContainer width="100%" height="100%">
			<s:Group id="canvas" width="100%" height="100%" clipAndEnableScrolling="true">
			</s:Group>
		</s:BorderContainer>
	</s:HGroup>
</s:WindowedApplication>
